---
title: "自建聊天服务器、机器人与多平台桥接"
date: 2021-03-08T00:36:39+08:00
draft: true
---

# 前言

利用开源解决方案自建聊天服务器，端到端加密，没有恼人的EULA，自己控制数据，可以和其他的服务器组成联邦，甚至还能通过桥接与其它聊天软件的个人和群组聊天——整个事情看起来十分的完美。 当然，整个系统需要一点时间来搭建，我一开始只是想做一个稳定的聊天机器人，后来才发现自建聊天服务器带来的的更多便利。

## 我构建聊天机器人的经历

在进入正题之前想先聊聊我对于构建聊天机器人的一些经历，也是展示一些聊天机器人的Use Case，不感兴趣的读者请自行跳过。

第一次接触到Chatbot是在2018年大二的时候，参加了微软学生俱乐部的暑期活动，有一个项目是给Windows下面的语音助手Cortana开发新功能，我提出了一个快捷键小抄表的proposal，大意就是在工作中想知道某个软件完成某个操作的快捷键是什么的时候，可以直接询问Cortana，不用再打断工作流去互联网查询。

![cortana](cortana.png)

这个项目主要通过微软的自然语言理解服务LUIS来识别用户问题中的软件和操作，之后去预先积累的操作数据中查询并返回，Cortana侧的交互是通过平台上的开发语言SCL（Semantic Composition Language）来实现的。 这是我第一次开发聊天机器人，SCL比较简洁的设计也给了我很多启发。

后来再搞Chatbot就是单纯给自己用了，19年的时候看到一篇关于人生日历的文章，就基于前端写了一个可以记录每天干的事情以及打分的网页，存储是把xml文件放在阿里云的OSS服务上实现的，但是每天去OSS服务上修改xml文件就很麻烦，于是就搞了一个QQ机器人，每天定时询问当天做了什么，然后把内容追加到OSS文件里。 后来到了考完试出分的时候，我觉得经常去教务刷网站看有没有处分很麻烦，就写了一个脚本定期抓取，每当有新课程的成绩出现就发qq消息通知。

![img](qqbot-2019.png)

后来申请到了国外的学校，大家自发组织了一个刷题打卡微信群，我觉得群里之前的手动打卡方式非常原始，就搞了一个微信的打卡机器人，

时间来到2020年8月，QQ机器人的框架开始大量被腾讯查封，也包括我使用的酷Q，这导致我只能另寻出路。 好在这之前的一段时间就接触到了微信的机器人框架Wechaty，开始用微信的一个小号来做日常的机器人，在迁移的过程中也修改了代码结构，使得逻辑代码可以兼容不同的底层聊天软件。

![qqbanned](qqbot-baned.jpg)

# Matrix 与 Synapse

# 聊天机器人

# 多平台桥接

## Discord

## Telegram

## Whatsapp

## 微信
